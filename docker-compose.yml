version: '3.8'

services:
  containerlab-designer:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - REACT_APP_SERVER_IP=${SERVER_IP}
        - REACT_APP_AUTH_API_URL=http://${SERVER_IP}:${AUTH_API_PORT:-3000}
        - REACT_APP_BACKEND_API_URL=http://${SERVER_IP}:${BACKEND_API_PORT:-3001}
        - REACT_APP_CONTAINERLAB_API_URL=http://${SERVER_IP}:${CONTAINERLAB_API_PORT:-8080}
        - REACT_APP_CLAB_SERVERS=${CLAB_SERVERS}
    container_name: containerlab-designer
    ports:
      - "${FRONTEND_PORT:-80}:80"
    restart: unless-stopped
    networks:
      - containerlab-network

networks:
  containerlab-network:
    name: containerlab-network
    driver: bridge 